/*!
 * JavaScript Class Library v0.1 (JSC v0.1)
 *
 * Copyright 2012 Jean-Sebastien CONAN
 * Released under the MIT license
 */
(function(e,t){function y(e,t,n){var r;if(n){if(n.superClass){r=g.loadClass(n.superClass);!r&&g.error("Class ["+n.superClass+"] is unknown !","JSC.Class");n.superClass=r.className||g.type(r);e.prototype=new r;e.prototype.constructor=e}g.extend(e,n,r)}e.extend=function(e){return g.extend(this,e,r)};e.implement=function(e,t){return g.implement(this,e,t)};e.interfaces=r&&r.interfaces?g.merge({},r.interfaces):{};e.prototype.attach=g.innerAttach;e.prototype.className=e.className=t;e.guid=g.id();return e}var n=e.document,r=0,i="Unexpected error !",s=[],o={},u=s.slice,a=o.hasOwnProperty,f=o.toString,l={},c=/^\[object\s(.*)\]$/,h=/inherited/.test(function(){this.inherited()})?/\binherited\b/:/.*/,p=/\s*([\(\)\[\]\{\};]+)\s*/g,d=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={'"':'\\"',"\\":"\\\\","	":"\\t","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r"};(function(e){for(var t=0;t<e.length;t++){l["[object "+e[t]+"]"]=e[t]}})(["Array","Boolean","Date","Function","Object","Number","RegExp","String"]);e.className="Window";n.className="Document";var m=function(e,t){this.message=e;this.context=t};m.prototype=new Error;m.prototype.className=m.className="JSCError";var g={version:"0.1",className:"JSC",guid:0,id:function(){return++r},tag:function(e,n){return e?e.guid||(this===e?e.guid:e.guid=n||this.id()):t},type:function(e){if(null==e){return String(e)}if(e.className){return e.className}var t=f.call(e);return l[t]||(l[t]=(t.match(c)||[0,"Object"])[1])},isFunction:function(e){return e&&"[object Function]"===f.call(e)?true:false},isAbstract:function(e){return e&&this.isFunction(e)&&e.abstractMethod?true:false},isAttached:function(e){return e&&this.isFunction(e)&&e.attached?true:false},isInherited:function(e){return e&&this.isFunction(e)&&e.inheritance?true:false},isArray:Array.isArray||function(e){return e&&"[object Array]"===f.call(e)?true:false},isObject:function(e){return e&&"[object Object]"===f.call(e)?true:false},isString:function(e){return""===e||e&&"[object String]"===f.call(e)?true:false},isBool:function(e){return false===e||e&&"[object Boolean]"===f.call(e)?true:false},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},error:function(e,t){throw new m(e||i,t)},globalize:function(t,n){if(!this.isString(t)){if("undefined"===typeof n){n=t;t=t.className}t=""+t}e[t]=n;return n},global:function(t){return e[t]},merge:function(e){var n,r,i,s,o,u=false;for(r=0;r<arguments.length;r++){e=arguments[r];if(this.isBool(e)){u=e}else if(!n){n=e}else{for(i in e){s=n[i];o=e[i];if(u&&o){if(this.isObject(o)){n[i]=this.merge(u,this.isObject(s)?s:{},o);continue}else if(this.isArray(o)){n[i]=this.merge(u,this.isArray(s)?s:[],o);continue}}if(o!==t){n[i]=o}}}}return n||{}},owned:function(e){var t,n={};if(e){for(t in e){if(a.call(e,t)){n[t]=e[t]}}}return n},attach:function(e,n){if(e&&this.isString(n)){var r=e[n];n=e;e=r}var i=this.noop;if(this.isFunction(e)){var s=u.call(arguments,2);i=function(){return e.apply(n,s.concat(u.call(arguments)))};i.attached=true}this.tag(i,e?this.tag(e):t);return i},innerAttach:function(e,t){var n="__cache__"+e;if(this[e]){if(t||!this[n]){this[n]=g.attach.apply(g,[this,e].concat(u.call(arguments,2)))}return this[n]}else{return g.noop}},abstractMethod:function(e){var t=function(){var t=(this.className||"[unknownClass]")+"."+(e||"[unknownMethod]");g.error(t+" : This method is abstract and have to be overridden !",t)};t.abstractMethod=true;return t},override:function(e,t){if(e!==t&&this.isFunction(e)&&h.test(e)){t=this.isFunction(t)?t:g.noop;var n=function(){var n=this.inherited;this.inherited=t;var r=e.apply(this,arguments);this.inherited=n;return r};n.inheritance=true;return n}return e},extend:function(e,t,n){if(e&&e.prototype){for(var r in t){if(a.call(t,r)){e.prototype[r]=n?this.override(t[r],n.prototype[r]):t[r]}}}return e},implement:function(e,n,r){var i,s;if(e&&e.prototype){if(g.isString(n)){var o=r;r=n;n=o}if(n){if(g.isArray(n)){for(i=0;i<n.length;i++){s=n[i];if(t===e.prototype[s]&&"className"!==s){e.prototype[s]=this.abstractMethod(s)}}}else{r=r||n.className;for(i in n){s=n[i];if(t===e.prototype[i]&&"className"!==i){e.prototype[i]=t===s?this.abstractMethod(i):s}}}}if(r){e.interfaces=e.interfaces||{};e.interfaces[r]=true}}return e},instanceOf:function(e,t){var n,r;if(e&&t){r=e.constructor&&e.constructor.interfaces?e.constructor.interfaces:e.interfaces||o;if(this.isString(t)){if(r[t]||t===e.className){return true}n=this.getClass(t);if(n){t=n}else{return false}}if(this.isFunction(t)){return e instanceof t||r[t.className]||e.className===t.className?true:false}return r[t.className]||e.className===t.className?true:false}return false},getClass:function(e){var n=this.isString(e)?this.global(e):e;return this.isFunction(n)?n:t},loadClass:function(e){return this.getClass(e)||this.error("Class ["+e+"] not found !","JSC.loadClass")},Class:function(e,t){if(e&&!this.isString(e)){t=e;e=t.className}var n=function(){if(arguments.callee.caller===y){return this}this.className=e;this.guid=g.id();this.initialize&&this.initialize.apply(this,arguments);return this};return y(n,e,t)},Singleton:function(e,n){if(e&&!this.isString(e)){n=e;e=n.className}var r=function(){if(arguments.callee.caller===y){return this}if(arguments.callee.caller!==r.getInstance){g.error("This class cannot be directly instantiated",e)}this.className=e;this.guid=g.id();this.initialize&&this.initialize.apply(this,arguments);return this};r.getInstance=function(){if(t===this.__instance){this.__instance=new r}return this.__instance};return y(r,e,n)},Multiton:function(e,n){if(e&&!this.isString(e)){n=e;e=n.className}var r=function(){if(arguments.callee.caller===y){return this}if(arguments.callee.caller!==r.getInstance){g.error("This class cannot be directly instantiated",e)}this.className=e;this.guid=g.id();this.initialize&&this.initialize.apply(this,arguments);return this};r.getInstance=function(e){var n=""+e;this.__instances=this.__instances||{};if(t===this.__instances[n]){this.__instances[n]=new r(e)}return this.__instances[n]};return y(r,e,n)},toString:function(){if(arguments.length){var e,t,n=arguments[0],r="";if(!n){return"undefined"===typeof n?"undefined":false===n?"false":null===n?"null":""+n}switch(f.call(n)){case"[object String]":if(d.test(n)){r='"'+n.replace(d,function(e){var t=v[e];return t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})+'"'}else{r='"'+n+'"'}break;case"[object Object]":r="{";for(e in n){r+=(r.length>1?",":"")+this.toString(e)+":"+this.toString(n[e])}r+="}";break;case"[object Array]":r="[";for(e=0;e<n.length;e++){r+=(r.length>1?",":"")+this.toString(n[e])}r+="]";break;case"[object Function]":r=n.toString().replace(p,"$1");break;case"[object RegExp]":r="/"+n.source+"/"+(n.global?"g":"")+(n.ignoreCase?"i":"");break;default:r=n.toString()}return r}return this.className+" "+this.version},noop:function(){}};g.globalize(g);g.globalize(m)})(window)