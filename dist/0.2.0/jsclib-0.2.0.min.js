/*!
 * JavaScript Class Library v0.2 (JSC v0.2)
 *
 * Copyright 2012 Jean-Sebastien CONAN
 * Released under the MIT license
 */
(function(e,t){var n=0,r="Unexpected error !",i="%s : This method is abstract and have to be overridden !",s="Class [%s] not found !",o="This class cannot be directly instantiated !",u=[],a={},f=u.slice,l=a.hasOwnProperty,c=a.toString,h={},p=/^\[object\s(.*)\]$/,d=/inherited/.test(function(){this.inherited()})?/\binherited\b/:/.*/,v=/\s*([\(\)\[\]\{\};]+)\s*/g,m=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={'"':'\\"',"\\":"\\\\","	":"\\t","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r"},y={"[object String]":function(e){return m.test(e)?'"'+e.replace(m,function(e){var t=g[e];return t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})+'"':'"'+e+'"'},"[object Object]":function(e){var t,n="{";for(t in e){n+=(n.length>1?",":"")+w.toString(t)+":"+w.toString(e[t])}return n+"}"},"[object Array]":function(e){var t,n="[";for(t=0;t<e.length;t++){n+=(n.length>1?",":"")+w.toString(e[t])}return n+"]"},"[object Function]":function(e){return e.toString().replace(v,"$1")},"[object RegExp]":function(e){return"/"+e.source+"/"+(e.global?"g":"")+(e.ignoreCase?"i":"")}};(function(e){for(var t=0;t<e.length;t++){h["[object "+e[t]+"]"]=e[t]}})(["Array","Boolean","Date","Function","Object","Number","RegExp","String"]);e.className="Window";var b=function(e,t){this.message=e;this.context=t};b.prototype=new Error;b.prototype.constructor=b;b.prototype.className=b.className="JSCError";var w={version:"0.2",className:"JSC",guid:0,id:function(e,t){if("undefined"!==typeof e){return e.guid||(w===e?e.guid:e.guid=t||++n)}return t||++n},type:function(e){if(null==e){return String(e)}if(e.className){return e.className}var t=c.call(e);return h[t]||(h[t]=(t.match(p)||[0,"Object"])[1])},isFunction:function(e){return e&&"[object Function]"===c.call(e)?true:false},isClass:function(e){return e&&e.className&&"[object Function]"===c.call(e)?true:false},isInstance:function(e){return e&&e.className&&"[object Function]"!==c.call(e)?true:false},isAbstract:function(e){return e&&w.isFunction(e)&&e.abstractMethod?true:false},isAttached:function(e){return e&&w.isFunction(e)&&e.attached?true:false},isInherited:function(e){return e&&w.isFunction(e)&&e.inheritance?true:false},isArray:Array.isArray||function(e){return e&&"[object Array]"===c.call(e)?true:false},isObject:function(e){return e&&"[object Object]"===c.call(e)?true:false},isEmptyObject:function(e){if(!w.isObject(e)){return false}for(var t in e){return false}return true},isString:function(e){return""===e||e&&"[object String]"===c.call(e)?true:false},isBool:function(e){return false===e||e&&"[object Boolean]"===c.call(e)?true:false},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},error:function(e,t){throw new b(e||r,t)},globalize:function(t,n){if(t&&!w.isString(t)&&"undefined"===typeof n){n=t;t=t.className}e[""+t]=n;return n},global:function(t){return e[t]},merge:function(e){var n,r,i,s,o,u=false;for(r=0;r<arguments.length;r++){e=arguments[r];if(w.isBool(e)){u=e}else if(!n){n=e}else{for(i in e){s=n[i];o=e[i];if(u&&o){if(w.isObject(o)){n[i]=w.merge(u,w.isObject(s)?s:{},o);continue}else if(w.isArray(o)){n[i]=w.merge(u,w.isArray(s)?s:[],o);continue}}if(o!==t){n[i]=o}}}}return n||{}},each:function(e,t){var n,r,i,s;if(e&&t){if(w.isArray(e)){if(w.isFunction(t)){for(n=0;n<e.length;n++){s=e[n];t.call(s,n,s,e)}}else{r=f.call(arguments,2);for(n=0;n<e.length;n++){s=e[n];i=s[t];w.isFunction(i)&&i.apply(s,r)}}}else{if(w.isFunction(t)){for(n in e){s=e[n];t.call(s,n,s,e)}}else{r=f.call(arguments,2);for(n in e){s=e[n];i=s[t];w.isFunction(i)&&i.apply(s,r)}}}}return e},owned:function(e){var t,n={};if(e){for(t in e){if(l.call(e,t)){n[t]=e[t]}}}return n},attach:function(e,n){if(e&&w.isString(n)){var r=e[n];n=e;e=r}var i=w.noop;if(w.isFunction(e)){var s=f.call(arguments,2);i=function(){return e.apply(n,s.concat(f.call(arguments)))};i.attached=true}w.id(i,e?w.id(e):t);return i},innerAttach:function(e,t){if(e&&this[e]){var n="__cache__"+e;if(t||!this[n]){this[n]=w.attach.apply(w,[this,e].concat(f.call(arguments,2)))}return this[n]}else{return w.noop}},abstractMethod:function(e){var t=function(){var t=(this.className||"[unknownClass]")+"."+(e||"[unknownMethod]");w.error(i.replace("%s",t),t)};t.abstractMethod=true;return t},override:function(e,t){if(e!==t&&w.isFunction(e)&&d.test(e)){t=w.isFunction(t)?t:w.noop;var n=function(){var n=this.inherited;this.inherited=t;var r=e.apply(this,arguments);this.inherited=n;return r};n.inheritance=true;return n}return e},extend:function(e,t,n){if(e&&e.prototype){for(var r in t){if(l.call(t,r)){e.prototype[r]=n?w.override(t[r],n.prototype[r]):t[r]}}}return e},implement:function(e,n,r){var i,s;if(e&&e.prototype){if(w.isString(n)){var o=r;r=n;n=o}if(n){if(w.isArray(n)){for(i=0;i<n.length;i++){s=n[i];if(t===e.prototype[s]&&"className"!==s){e.prototype[s]=w.abstractMethod(s)}}}else{r=r||n.className;for(i in n){s=n[i];if(t===e.prototype[i]&&"className"!==i){e.prototype[i]=t===s?w.abstractMethod(i):s}}}}if(r){e.interfaces=e.interfaces||{};e.interfaces[r]=true}}return e},instanceOf:function(e,t){var n,r;if(e&&t){r=e.constructor&&e.constructor.interfaces?e.constructor.interfaces:e.interfaces||a;if(w.isString(t)){if(r[t]||t===e.className){return true}n=w.getClass(t);if(n){t=n}else{return false}}if(w.isFunction(t)){return e instanceof t||r[t.className]||e.className===t.className?true:false}return r[t.className]||e.className===t.className?true:false}return false},getClass:function(e){var n=w.isString(e)?w.global(e):e;return w.isFunction(n)?n:t},loadClass:function(e){return w.getClass(e)||w.error(s.replace("%s",e),"JSC.loadClass")},Class:function(e,t){var n,r;if(e&&!w.isString(e)){t=e;e=t.className}n=function(){if(arguments.callee.caller===w.Class){return this}n.getInstance&&arguments.callee.caller!==n.getInstance&&w.error(o,e);this.guid=w.id();this.initialize&&this.initialize.apply(this,arguments);return this};if(t){if(t.superClass){r=w.loadClass(t.superClass)||w.error(s.replace("%s",t.superClass),"JSC.Class");t.superClass=r.className||w.type(r);n.prototype=new r;n.prototype.constructor=n}w.extend(n,t,r)}n.extend=function(e){return w.extend(this,e,r)};n.implement=function(e,t){return w.implement(this,e,t)};n.interfaces=r&&r.interfaces?w.merge({},r.interfaces):{};n.prototype.attach=w.innerAttach;n.prototype.className=n.className=e;n.guid=w.id();return n},Singleton:function(e,n){var r=w.Class(e,n);r.getInstance=function(){if(t===this.__instance){this.__instance=new r}return this.__instance};return r},Multiton:function(e,n){var r=w.Class(e,n);r.getInstance=function(e){var n=""+e;this.__instances=this.__instances||{};if(t===this.__instances[n]){this.__instances[n]=new r(e)}return this.__instances[n]};return r},Make:function(e,t,n,r){var i,s,o,u,a,f,l;for(s=0;s<arguments.length;s++){o=arguments[s];switch(typeof o){case"undefined":break;case"string":u=o.toLowerCase();break;case"boolean":l=o;break;default:if(a){f=o}else{a=o}}}i="singleton"===u?w.Singleton(a):"multiton"===u?w.Multiton(a):w.Class(a);f&&w.merge(i,f);return false!==l&&i.className?w.globalize(i):i},toString:function(){if(arguments.length){var e,t=arguments[0];if(!t){return String(t)}else{e=c.call(t);return y[e]?y[e](t):t.toString()}}return w.className+" "+w.version},noop:function(){}};w.globalize(w);w.globalize(b)})(window)