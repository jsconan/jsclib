/*!
 * JavaScript Class Library v0.4.1 (JSC v0.4.1)
 *
 * Copyright 2012 Jean-Sebastien CONAN
 * Released under the MIT license
 */
(function(e){var t=this,n=0,r={},i="Unexpected error !",s="%s : This method is abstract and have to be overridden !",o="Class [%s] not found !",u="This class cannot be directly instantiated !",a=[],f={},l=a.slice,c=f.hasOwnProperty,h=f.toString,p=function(e){var t,n={};for(t=0;t<e.length;t++){n["[object "+e[t]+"]"]=e[t]}return n}(["Array","Boolean","Date","Function","Object","Number","RegExp","String"]),d=/^\[object\s(.*)\]$/,v=/inherited/.test(function(){this.inherited()})?/\binherited\b/:/.*/,m=/\s*([\(\)\[\]\{\};]+)\s*/g,g=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b=/^[\],:{}\s]*$/,w=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,E=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,S=/(?:^|:|,)(?:\s*\[)+/g,x={'"':'\\"',"\\":"\\\\","	":"\\t","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r"},T={"[object String]":function(e){return g.test(e)?'"'+e.replace(g,function(e){var t=x[e];return t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})+'"':'"'+e+'"'},"[object Object]":function(e){var t,n="{";for(t in e){if(c.call(e,t)){n+=(n.length>1?",":"")+L.toString(t)+":"+L.toString(e[t])}}return n+"}"},"[object Array]":function(e){var t,n="[";for(t=0;t<e.length;t++){n+=(n.length>1?",":"")+L.toString(e[t])}return n+"]"},"[object Function]":function(e){return e.toString().replace(m,"$1")},"[object RegExp]":function(e){return"/"+e.source+"/"+(e.global?"g":"")+(e.ignoreCase?"i":"")}},N=function(e){return e},C={"[object Number]":function(e){return isFinite(e)?e:null},"[object String]":N,"[object Boolean]":N,"[object Object]":function(t){var n,r,i={};for(n in t){if(c.call(t,n)){r=L.jsonData(t[n]);if(e!==r){i[n]=r}}}return i},"[object Array]":function(t){var n,r,i=[];for(n=0;n<t.length;n++){r=L.jsonData(t[n]);if(e!==r){i.push(r)}}return i}};if(!"".trim){String.prototype.trim=function(){return this.replace(y,"")}}var k=function(e,t){this.message=e;this.context=t};k.prototype=new Error;k.prototype.constructor=k;k.prototype.className=k.className="JSCError";var L={version:"0.4.1",className:"JSC",guid:0,noop:function(){},id:function(e,t){if("undefined"!==typeof e){return e.guid||(L===e?e.guid:e.guid=t||++n)}return t||++n},type:function(e){if(null==e){return String(e)}if(e.className){return e.className}var t=h.call(e);return p[t]||(p[t]=(t.match(d)||[0,"Object"])[1])},isFunction:function(e){return e&&"[object Function]"===h.call(e)?true:false},isClass:function(e){return e&&e.className&&"[object Function]"===h.call(e)?true:false},isInstance:function(e){return e&&e.className&&"[object Function]"!==h.call(e)?true:false},isAbstract:function(e){return e&&L.isFunction(e)&&e.abstractMethod?true:false},isAttached:function(e){return e&&L.isFunction(e)&&e.attached?true:false},isOverloaded:function(e){return e&&L.isFunction(e)&&e.inheritance?true:false},isArray:Array.isArray||function(e){return e&&"[object Array]"===h.call(e)?true:false},isObject:function(e){return e&&"[object Object]"===h.call(e)?true:false},isEmptyObject:function(e){if(!L.isObject(e)){return false}for(var t in e){return false}return true},isString:function(e){return""===e||e&&"[object String]"===h.call(e)?true:false},isBool:function(e){return false===e||e&&"[object Boolean]"===h.call(e)?true:false},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isNull:function(e){return e===null},isUndef:function(t){return t===e},isVoid:function(t){return t===e||t===null},error:function(e,t){throw new k(e||i,t)},globalize:function(e,n){if(e&&!L.isString(e)&&"undefined"===typeof n){n=e;e=e.className}t[""+e]=n;return n},global:function(e){return t[e]},toString:function(){if(arguments.length){var e,t=arguments[0];if(!t&&""!==t){return String(t)}else{e=h.call(t);return T[e]?T[e](t):t.toString()}}return L.className+" "+L.version},jsonData:function(t){if(t){var n=h.call(t);return C[n]?C[n](t):e}return t},jsonEncode:function(t){t=L.jsonData(t);return e!==t?L.toString(t):""},jsonDecode:function(e){if(L.isString(e)){try{e=e.trim();if(e){if(t.JSON&&t.JSON.parse){return t.JSON.parse(e)}if(b.test(e.replace(w,"@").replace(E,"]").replace(S,""))){return(new Function("return "+e+";"))()}}}catch(n){}}return null},sort:function(e,t,n){var r,i,s,o,u,a,f;if(L.isArray(e)){t=!t?[]:L.isArray(t)?t:[t];if(t.length){e.sort(function(e,n){a=L.isVoid(e);f=L.isVoid(n);if(!a&&!f){u=false;for(r=0;r<t.length;r++){i=t[r];s=e[i];o=n[i];a=L.isVoid(s);f=L.isVoid(o);if(!a&&!f){if(s<o){return-1}if(s>o){return 1}continue}else if(a&&f){u=true}else{return a?-1:1}}return u?e<n?-1:e>n?1:0:0}else{return a?-1:f?1:0}})}else{e.sort()}if(n){r=0;i=e.length-1;if(r<=i){a=f=true;while(r<=i){if(a){if(L.isVoid(e[r])){r++}else{a=false}}if(f){if(L.isVoid(e[i])){i--}else{f=false}}if(!a&&!f){break}}}r&&e.splice(0,r);i<e.length-1&&e.splice(i,e.length-i)}}return e},shuffle:function(e){if(L.isArray(e)){var t=e.length,n,r;while(t){n=parseInt(Math.random()*--t);r=e[t];e[t]=e[n];e[n]=r}}return e},merge:function(t){var n,r,i,s,o,u=false;for(r=0;r<arguments.length;r++){t=arguments[r];if(L.isBool(t)){u=t}else if(!n){n=t}else{for(i in t){s=n[i];o=t[i];if(u&&o){if(L.isObject(o)){n[i]=L.merge(u,L.isObject(s)?s:{},o);continue}else if(L.isArray(o)){n[i]=L.merge(u,L.isArray(s)?s:[],o);continue}}if(o!==e){n[i]=o}}}}return n||{}},each:function(e,t){var n,r,i,s;if(e&&t){if(L.isArray(e)){if(L.isFunction(t)){for(n=0;n<e.length;n++){s=e[n];t.call(s,n,s,e)}}else{r=l.call(arguments,2);for(n=0;n<e.length;n++){s=e[n];i=s[t];L.isFunction(i)&&i.apply(s,r)}}}else{if(L.isFunction(t)){for(n in e){s=e[n];t.call(s,n,s,e)}}else{r=l.call(arguments,2);for(n in e){s=e[n];i=s[t];L.isFunction(i)&&i.apply(s,r)}}}}return e},owned:function(e){var t,n={};if(e){for(t in e){if(c.call(e,t)){n[t]=e[t]}}}return n},attach:function(t,n){if(t&&L.isString(n)){var r=t[n];n=t;t=r}var i=L.noop;if(L.isFunction(t)){var s=l.call(arguments,2);i=function(){return t.apply(n,s.concat(l.call(arguments)))};i.attached=true}L.id(i,t?L.id(t):e);return i},abstractMethod:function(e){var t=function(){var t=(this.className||"[unknownClass]")+"."+(e||"[unknownMethod]");L.error(s.replace("%s",t),t)};t.abstractMethod=true;return t},overload:function(e,t){if(e!==t&&L.isFunction(e)&&v.test(e)){t=L.isFunction(t)?t:L.noop;var n=function(){var n=this.inherited;this.inherited=t;var r=e.apply(this,arguments);this.inherited=n;return r};n.inheritance=true;return n}return e},extend:function(e,t,n){if(e&&e.prototype){for(var r in t){if(c.call(t,r)){e.prototype[r]=n?L.overload(t[r],n.prototype[r]):t[r]}}}return e},implement:function(t,n,r){var i,s;if(t&&t.prototype){if(L.isString(n)){var o=r;r=n;n=o}if(n){if(L.isArray(n)){for(i=0;i<n.length;i++){s=n[i];if(e===t.prototype[s]&&"className"!==s){t.prototype[s]=L.abstractMethod(s)}}}else{r=r||n.className;for(i in n){s=n[i];if(e===t.prototype[i]&&"className"!==i){t.prototype[i]=e===s?L.abstractMethod(i):s}}}}if(r){t.interfaces=t.interfaces||{};t.interfaces[r]=true}}return t},instanceOf:function(e,t){var n,r;if(e&&t){r=e.constructor&&e.constructor.interfaces?e.constructor.interfaces:e.interfaces||f;if(L.isString(t)){if(r[t]||t===e.className){return true}n=L.getClass(t);if(n){t=n}else{return false}}if(L.isFunction(t)){return e instanceof t||r[t.className]||e.className===t.className?true:false}return r[t.className]||e.className===t.className?true:false}return false},getClass:function(t){var n=L.isString(t)?L.global(t):t;return L.isFunction(n)?n:e},loadClass:function(e){return L.getClass(e)||L.error(o.replace("%s",e),"JSC.loadClass")},Class:function(t,n){var r,i;if(t&&!L.isString(t)){n=t;t=n.className}r=function(){if(arguments.callee.caller===L.Class){return this}if(this instanceof r){r.getInstance&&arguments.callee.caller!==r.getInstance&&L.error(u,t);this.guid=L.id();this.initialize&&this.initialize.apply(this,arguments);return this}return r.body?r.body.apply(r,arguments):e};if(n){if(n.superClass){i=L.loadClass(n.superClass)||L.error(o.replace("%s",n.superClass),"JSC.Class");n.superClass=i.className||L.type(i);r.prototype=new i;r.prototype.constructor=r}L.extend(r,n,i)}r.extend=function(e){return L.extend(this,e,i)};r.implement=function(e,t){return L.implement(this,e,t)};r.statics=function(e){return L.merge(this,e)};r.interfaces=i&&i.interfaces?L.merge({},i.interfaces):{};r.prototype.attach=function(e,t){if(e&&this[e]){var n="__cache__"+e;if(t||!this[n]){this[n]=L.attach.apply(L,[this,e].concat(l.call(arguments,2)))}return this[n]}else{return L.noop}};r.prototype.className=r.className=t;r.guid=L.id();return r},Singleton:function(t,n){var r=L.Class(t,n);r.getInstance=function(){if(e===this.__instance){this.__instance=new r}return this.__instance};return r},Multiton:function(t,n){var r=L.Class(t,n);r.getInstance=function(t){var n=""+t;this.__instances=this.__instances||{};if(e===this.__instances[n]){this.__instances[n]=new r(t)}return this.__instances[n]};return r},Make:function(e,t,n,r){var i,s,o,u,a,f,l;for(s=0;s<arguments.length;s++){o=arguments[s];switch(typeof o){case"undefined":break;case"string":u=o.toLowerCase();break;case"boolean":l=o;break;default:if(a){f=o}else{a=o}}}i="singleton"===u?L.Singleton(a):"multiton"===u?L.Multiton(a):L.Class(a);f&&i.statics(f);i.body=i.body||i.getInstance;return false!==l&&i.className?L.globalize(i):i},Self:function(e){if(L.isClass(e)){e.body=e.getInstance}return e},install:function(e,n){var i,s,o,u;if(e&&!L.isString(e)){n=e;e=n.pluginName}if(!L.isObject(n)||L.isInstalled(e,n)){return false}if(e){i=L}else{i=t;e=L.className}u=i[e]=i[e]||{};o=r[e]=r[e]||{};for(s in n){if("pluginName"===s){continue}o[s]=u[s];u[s]=L.overload(n[s],u[s])}return true},isInstalled:function(e,t){if(e&&!L.isString(e)){t=e;e=t.pluginName}if(e){return r[e]?true:false}else{if(!L.isObject(t)){return false}for(var n in t){if("undefined"===typeof L[n]){return false}}}return true},uninstall:function(e,n){var i,s,o,u;if(e&&!L.isString(e)){n=e;e=n.pluginName}if(e){if(!r[e]){return false}i=L}else{if(!L.isObject(n)){return false}for(s in n){if("undefined"===typeof L[s]){return false}}i=t;e=L.className}u=i[e]=i[e]||{};o=r[e]=r[e]||{};for(s in o){u[s]=o[s];"undefined"===typeof u[s]&&delete u[s];delete o[s]}L.isEmptyObject(u)&&delete i[e];L.isEmptyObject(o)&&delete r[e];return true}};L.globalize(L);L.globalize(k);var A=localStorage||{},O=A.getItem||function(e){return this[e]},M=A.setItem||function(e,t){this[e]=t},_=A.removeItem||function(e){this[e]&&delete this[e]};var D={className:"LocalStorage",initialize:function(e){this.name=e||this.name;this.load();localStorage&&this.bindEvent(t,"unload",L.attach(this,"store"))},load:function(){this.data=L.jsonDecode(O.call(A,this.name))||{}},store:function(){if(L.isEmptyObject(this.data)){_.call(A,this.name)}else{M.call(A,this.name,L.jsonEncode(this.data))}},set:function(e,t){this.data[e]=t;return this},get:function(e){return this.data[e]},remove:function(e){var t=this.data[e];"undefined"!==typeof t&&delete this.data[e];return t},clear:function(){this.data={};return this},bindEvent:function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}},name:L.className,data:null};L.localStorage=L.Multiton(D);L.localStorage.body=L.localStorage.getInstance})()